---
import WikiPage from "../../components/wiki/WikiPage.astro";
import brewery from "./config/brewery.js";
import farmandcharm from "./config/farm-and-charm.js";
import herbalbrews from "./config/herbalbrews.js";
import vinery from "./config/vinery.js";
import candlelight from "./config/candlelight.js";
import pottery from "./config/lilis-pottery.js";
import alpinewhispers from "./config/alpine-whispers.js";
import furniture from "./config/furniture.js";
import camping from "./config/camping.js";
import hearthandtimber from "./config/hearth-and-timber.js";

export function getStaticPaths() {
  return [
    { params: { slug: "brewery" } },
    { params: { slug: "farm-and-charm" } },
    { params: { slug: "herbalbrews" } },
    { params: { slug: "vinery" } },
    { params: { slug: "furniture" } },
    { params: { slug: "camping" } },
    { params: { slug: "candlelight" } },
    { params: { slug: "lilis-pottery" } },
    { params: { slug: "alpine-whispers" } },
    { params: { slug: "hearth-and-timber" } },
  ];
}

const { slug } = Astro.params;

const configs = {
  brewery,
  "farm-and-charm": farmandcharm,
  herbalbrews,
  vinery,
  camping,
  candlelight,
  furniture,
  "hearth-and-timber": hearthandtimber,
  "lilis-pottery": pottery,
  "alpine-whispers": alpinewhispers,
};

const config = configs[slug];

if (!config) {
  return Astro.redirect("/404");
}

const wikiIndex = Object.entries(configs)
  .map(([wikiSlug, wikiConfig]) => ({
    slug: wikiSlug,
    title: wikiConfig?.title ?? wikiSlug,
  }))
  .sort((a, b) => String(a.title).localeCompare(String(b.title)));
---

<WikiPage config={config} currentSlug={slug} wikiIndex={wikiIndex} />